<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار الواجهة الأمامية - Luxbyte</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .content {
            padding: 40px;
        }

        .test-section {
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
            background: #f8f9fa;
        }

        .test-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .test-status {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-success {
            background: #d4edda;
            color: #155724;
        }

        .status-error {
            background: #f8d7da;
            color: #721c24;
        }

        .test-details {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            border: 1px solid #dee2e6;
        }

        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .result-success {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .result-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 5px;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s ease;
        }

        .summary {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin-top: 30px;
        }

        .summary h2 {
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-item {
            background: rgba(255,255,255,0.2);
            padding: 20px;
            border-radius: 10px;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            opacity: 0.9;
        }

        .iframe-container {
            width: 100%;
            height: 600px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }

        .iframe-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }

            .content {
                padding: 20px;
            }

            .summary-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-desktop"></i> اختبار الواجهة الأمامية</h1>
            <p>اختبار شامل لجميع صفحات ووظائف الواجهة الأمامية</p>
        </div>

        <div class="content">
            <!-- شريط التقدم -->
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div style="text-align: center; margin-bottom: 30px;">
                <span id="progressText">0% - جاري التحضير...</span>
            </div>

            <!-- اختبار الصفحة الرئيسية -->
            <div class="test-section" id="homepageTest">
                <div class="test-title">
                    <i class="fas fa-home"></i>
                    اختبار الصفحة الرئيسية
                    <span class="test-status status-pending" id="homepageStatusBadge">في الانتظار</span>
                </div>
                <div class="test-details" id="homepageDetails">
                    <button class="btn btn-primary" onclick="testHomepage()">
                        <i class="fas fa-play"></i>
                        اختبار الصفحة الرئيسية
                    </button>
                    <div class="iframe-container" id="homepageIframe" style="display: none;">
                        <iframe src="index.html" title="الصفحة الرئيسية"></iframe>
                    </div>
                </div>
            </div>

            <!-- اختبار صفحة رفع الملفات -->
            <div class="test-section" id="uploadTest">
                <div class="test-title">
                    <i class="fas fa-upload"></i>
                    اختبار صفحة رفع الملفات
                    <span class="test-status status-pending" id="uploadStatusBadge">في الانتظار</span>
                </div>
                <div class="test-details" id="uploadDetails">
                    <button class="btn btn-primary" onclick="testUploadPage()">
                        <i class="fas fa-play"></i>
                        اختبار صفحة الرفع
                    </button>
                    <div class="iframe-container" id="uploadIframe" style="display: none;">
                        <iframe src="file-upload.html" title="صفحة رفع الملفات"></iframe>
                    </div>
                </div>
            </div>

            <!-- اختبار JavaScript -->
            <div class="test-section" id="javascriptTest">
                <div class="test-title">
                    <i class="fas fa-code"></i>
                    اختبار JavaScript
                    <span class="test-status status-pending" id="javascriptStatusBadge">في الانتظار</span>
                </div>
                <div class="test-details" id="javascriptDetails">
                    <button class="btn btn-primary" onclick="testJavaScript()">
                        <i class="fas fa-play"></i>
                        اختبار JS
                    </button>
                </div>
            </div>

            <!-- اختبار CSS -->
            <div class="test-section" id="cssTest">
                <div class="test-title">
                    <i class="fas fa-paint-brush"></i>
                    اختبار CSS
                    <span class="test-status status-pending" id="cssStatusBadge">في الانتظار</span>
                </div>
                <div class="test-details" id="cssDetails">
                    <button class="btn btn-primary" onclick="testCSS()">
                        <i class="fas fa-play"></i>
                        اختبار CSS
                    </button>
                </div>
            </div>

            <!-- اختبار الاستجابة -->
            <div class="test-section" id="responsiveTest">
                <div class="test-title">
                    <i class="fas fa-mobile-alt"></i>
                    اختبار الاستجابة
                    <span class="test-status status-pending" id="responsiveStatusBadge">في الانتظار</span>
                </div>
                <div class="test-details" id="responsiveDetails">
                    <button class="btn btn-primary" onclick="testResponsive()">
                        <i class="fas fa-play"></i>
                        اختبار الاستجابة
                    </button>
                </div>
            </div>

            <!-- اختبار الأداء -->
            <div class="test-section" id="performanceTest">
                <div class="test-title">
                    <i class="fas fa-tachometer-alt"></i>
                    اختبار الأداء
                    <span class="test-status status-pending" id="performanceStatusBadge">في الانتظار</span>
                </div>
                <div class="test-details" id="performanceDetails">
                    <button class="btn btn-primary" onclick="testPerformance()">
                        <i class="fas fa-play"></i>
                        اختبار الأداء
                    </button>
                </div>
            </div>

            <!-- ملخص النتائج -->
            <div class="summary" id="summarySection" style="display: none;">
                <h2><i class="fas fa-chart-line"></i> ملخص النتائج</h2>
                <div class="summary-stats">
                    <div class="stat-item">
                        <div class="stat-number" id="totalTests">0</div>
                        <div class="stat-label">إجمالي الاختبارات</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="passedTests">0</div>
                        <div class="stat-label">نجح</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="failedTests">0</div>
                        <div class="stat-label">فشل</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="successRate">0%</div>
                        <div class="stat-label">معدل النجاح</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // متغيرات الاختبار
        let testResults = {
            homepage: false,
            upload: false,
            javascript: false,
            css: false,
            responsive: false,
            performance: false
        };

        let currentTest = 0;
        const totalTests = 6;

        // تحديث شريط التقدم
        function updateProgress() {
            const progress = (currentTest / totalTests) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `${Math.round(progress)}% - ${currentTest}/${totalTests} اختبارات مكتملة`;
        }

        // اختبار الصفحة الرئيسية
        async function testHomepage() {
            const testElement = document.getElementById('homepageTest');
            const statusBadge = document.getElementById('homepageStatusBadge');
            const details = document.getElementById('homepageDetails');
            
            statusBadge.textContent = 'جاري الاختبار...';
            statusBadge.className = 'test-status status-pending';
            
            try {
                // اختبار تحميل الصفحة
                const response = await fetch('index.html');
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                
                const html = await response.text();
                
                // اختبار العناصر الأساسية
                const tests = [];
                
                if (html.includes('<!DOCTYPE html>')) {
                    tests.push('✅ DOCTYPE صحيح');
                } else {
                    tests.push('❌ DOCTYPE مفقود');
                }
                
                if (html.includes('LUXBYTE')) {
                    tests.push('✅ عنوان LUXBYTE موجود');
                } else {
                    tests.push('❌ عنوان LUXBYTE مفقود');
                }
                
                if (html.includes('lang="ar"')) {
                    tests.push('✅ اللغة العربية محددة');
                } else {
                    tests.push('❌ اللغة العربية غير محددة');
                }
                
                if (html.includes('dir="rtl"')) {
                    tests.push('✅ اتجاه RTL محدد');
                } else {
                    tests.push('❌ اتجاه RTL غير محدد');
                }
                
                if (html.includes('Cairo')) {
                    tests.push('✅ خط Cairo محدد');
                } else {
                    tests.push('❌ خط Cairo غير محدد');
                }
                
                if (html.includes('app.js')) {
                    tests.push('✅ ملف app.js محدد');
                } else {
                    tests.push('❌ ملف app.js غير محدد');
                }
                
                const passedTests = tests.filter(test => test.includes('✅')).length;
                const totalPageTests = tests.length;
                
                if (passedTests === totalPageTests) {
                    testResults.homepage = true;
                    statusBadge.textContent = 'نجح';
                    statusBadge.className = 'test-status status-success';
                } else {
                    testResults.homepage = false;
                    statusBadge.textContent = 'فشل جزئي';
                    statusBadge.className = 'test-status status-error';
                }
                
                details.innerHTML = `
                    <div class="test-result ${testResults.homepage ? 'result-success' : 'result-error'}">
                        ${tests.join('<br>')}
                        <br><br>
                        <strong>النتيجة: ${passedTests}/${totalPageTests} اختبارات نجحت</strong>
                    </div>
                    <button class="btn btn-primary" onclick="showIframe('homepageIframe')">
                        <i class="fas fa-eye"></i>
                        عرض الصفحة
                    </button>
                `;
                
                currentTest++;
                updateProgress();
                
            } catch (error) {
                testResults.homepage = false;
                statusBadge.textContent = 'فشل';
                statusBadge.className = 'test-status status-error';
                
                details.innerHTML = `
                    <div class="test-result result-error">
                        ❌ فشل تحميل الصفحة الرئيسية<br>
                        خطأ: ${error.message}
                    </div>
                `;
                
                currentTest++;
                updateProgress();
            }
        }

        // اختبار صفحة رفع الملفات
        async function testUploadPage() {
            const testElement = document.getElementById('uploadTest');
            const statusBadge = document.getElementById('uploadStatusBadge');
            const details = document.getElementById('uploadDetails');
            
            statusBadge.textContent = 'جاري الاختبار...';
            statusBadge.className = 'test-status status-pending';
            
            try {
                // اختبار تحميل الصفحة
                const response = await fetch('file-upload.html');
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                
                const html = await response.text();
                
                // اختبار العناصر الأساسية
                const tests = [];
                
                if (html.includes('رفع المستندات')) {
                    tests.push('✅ عنوان الصفحة موجود');
                } else {
                    tests.push('❌ عنوان الصفحة مفقود');
                }
                
                if (html.includes('file-upload-manager.js')) {
                    tests.push('✅ مدير الملفات محدد');
                } else {
                    tests.push('❌ مدير الملفات غير محدد');
                }
                
                if (html.includes('@supabase/supabase-js')) {
                    tests.push('✅ Supabase محدد');
                } else {
                    tests.push('❌ Supabase غير محدد');
                }
                
                if (html.includes('activity-card')) {
                    tests.push('✅ بطاقات الأنشطة موجودة');
                } else {
                    tests.push('❌ بطاقات الأنشطة مفقودة');
                }
                
                if (html.includes('document-card')) {
                    tests.push('✅ بطاقات المستندات موجودة');
                } else {
                    tests.push('❌ بطاقات المستندات مفقودة');
                }
                
                if (html.includes('file-upload-area')) {
                    tests.push('✅ مناطق رفع الملفات موجودة');
                } else {
                    tests.push('❌ مناطق رفع الملفات مفقودة');
                }
                
                const passedTests = tests.filter(test => test.includes('✅')).length;
                const totalPageTests = tests.length;
                
                if (passedTests === totalPageTests) {
                    testResults.upload = true;
                    statusBadge.textContent = 'نجح';
                    statusBadge.className = 'test-status status-success';
                } else {
                    testResults.upload = false;
                    statusBadge.textContent = 'فشل جزئي';
                    statusBadge.className = 'test-status status-error';
                }
                
                details.innerHTML = `
                    <div class="test-result ${testResults.upload ? 'result-success' : 'result-error'}">
                        ${tests.join('<br>')}
                        <br><br>
                        <strong>النتيجة: ${passedTests}/${totalPageTests} اختبارات نجحت</strong>
                    </div>
                    <button class="btn btn-primary" onclick="showIframe('uploadIframe')">
                        <i class="fas fa-eye"></i>
                        عرض الصفحة
                    </button>
                `;
                
                currentTest++;
                updateProgress();
                
            } catch (error) {
                testResults.upload = false;
                statusBadge.textContent = 'فشل';
                statusBadge.className = 'test-status status-error';
                
                details.innerHTML = `
                    <div class="test-result result-error">
                        ❌ فشل تحميل صفحة رفع الملفات<br>
                        خطأ: ${error.message}
                    </div>
                `;
                
                currentTest++;
                updateProgress();
            }
        }

        // اختبار JavaScript
        async function testJavaScript() {
            const testElement = document.getElementById('javascriptTest');
            const statusBadge = document.getElementById('javascriptStatusBadge');
            const details = document.getElementById('javascriptDetails');
            
            statusBadge.textContent = 'جاري الاختبار...';
            statusBadge.className = 'test-status status-pending';
            
            try {
                // اختبار تحميل ملف JavaScript
                const response = await fetch('js/file-upload-manager.js');
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                
                const js = await response.text();
                
                // اختبار العناصر الأساسية
                const tests = [];
                
                if (js.includes('class FileUploadManager')) {
                    tests.push('✅ كلاس FileUploadManager موجود');
                } else {
                    tests.push('❌ كلاس FileUploadManager مفقود');
                }
                
                if (js.includes('uploadFile')) {
                    tests.push('✅ دالة uploadFile موجودة');
                } else {
                    tests.push('❌ دالة uploadFile مفقودة');
                }
                
                if (js.includes('validateFile')) {
                    tests.push('✅ دالة validateFile موجودة');
                } else {
                    tests.push('❌ دالة validateFile مفقودة');
                }
                
                if (js.includes('supabase')) {
                    tests.push('✅ تكامل Supabase موجود');
                } else {
                    tests.push('❌ تكامل Supabase مفقود');
                }
                
                if (js.includes('async')) {
                    tests.push('✅ استخدام async/await');
                } else {
                    tests.push('❌ لا يستخدم async/await');
                }
                
                if (js.includes('error')) {
                    tests.push('✅ معالجة الأخطاء موجودة');
                } else {
                    tests.push('❌ معالجة الأخطاء مفقودة');
                }
                
                const passedTests = tests.filter(test => test.includes('✅')).length;
                const totalJSTests = tests.length;
                
                if (passedTests === totalJSTests) {
                    testResults.javascript = true;
                    statusBadge.textContent = 'نجح';
                    statusBadge.className = 'test-status status-success';
                } else {
                    testResults.javascript = false;
                    statusBadge.textContent = 'فشل جزئي';
                    statusBadge.className = 'test-status status-error';
                }
                
                details.innerHTML = `
                    <div class="test-result ${testResults.javascript ? 'result-success' : 'result-error'}">
                        ${tests.join('<br>')}
                        <br><br>
                        <strong>النتيجة: ${passedTests}/${totalJSTests} اختبارات نجحت</strong>
                    </div>
                `;
                
                currentTest++;
                updateProgress();
                
            } catch (error) {
                testResults.javascript = false;
                statusBadge.textContent = 'فشل';
                statusBadge.className = 'test-status status-error';
                
                details.innerHTML = `
                    <div class="test-result result-error">
                        ❌ فشل تحميل ملف JavaScript<br>
                        خطأ: ${error.message}
                    </div>
                `;
                
                currentTest++;
                updateProgress();
            }
        }

        // اختبار CSS
        async function testCSS() {
            const testElement = document.getElementById('cssTest');
            const statusBadge = document.getElementById('cssStatusBadge');
            const details = document.getElementById('cssDetails');
            
            statusBadge.textContent = 'جاري الاختبار...';
            statusBadge.className = 'test-status status-pending';
            
            try {
                // اختبار تحميل ملف CSS
                const response = await fetch('style.css');
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                
                const css = await response.text();
                
                // اختبار العناصر الأساسية
                const tests = [];
                
                if (css.includes('@media')) {
                    tests.push('✅ استعلامات الوسائط موجودة');
                } else {
                    tests.push('❌ استعلامات الوسائط مفقودة');
                }
                
                if (css.includes('flexbox') || css.includes('flex')) {
                    tests.push('✅ Flexbox مستخدم');
                } else {
                    tests.push('❌ Flexbox غير مستخدم');
                }
                
                if (css.includes('grid')) {
                    tests.push('✅ CSS Grid مستخدم');
                } else {
                    tests.push('❌ CSS Grid غير مستخدم');
                }
                
                if (css.includes('transition')) {
                    tests.push('✅ الانتقالات موجودة');
                } else {
                    tests.push('❌ الانتقالات مفقودة');
                }
                
                if (css.includes('gradient')) {
                    tests.push('✅ التدرجات موجودة');
                } else {
                    tests.push('❌ التدرجات مفقودة');
                }
                
                if (css.includes('border-radius')) {
                    tests.push('✅ الزوايا المدورة موجودة');
                } else {
                    tests.push('❌ الزوايا المدورة مفقودة');
                }
                
                const passedTests = tests.filter(test => test.includes('✅')).length;
                const totalCSSTests = tests.length;
                
                if (passedTests >= totalCSSTests * 0.8) {
                    testResults.css = true;
                    statusBadge.textContent = 'نجح';
                    statusBadge.className = 'test-status status-success';
                } else {
                    testResults.css = false;
                    statusBadge.textContent = 'فشل جزئي';
                    statusBadge.className = 'test-status status-error';
                }
                
                details.innerHTML = `
                    <div class="test-result ${testResults.css ? 'result-success' : 'result-error'}">
                        ${tests.join('<br>')}
                        <br><br>
                        <strong>النتيجة: ${passedTests}/${totalCSSTests} اختبارات نجحت</strong>
                    </div>
                `;
                
                currentTest++;
                updateProgress();
                
            } catch (error) {
                testResults.css = false;
                statusBadge.textContent = 'فشل';
                statusBadge.className = 'test-status status-error';
                
                details.innerHTML = `
                    <div class="test-result result-error">
                        ❌ فشل تحميل ملف CSS<br>
                        خطأ: ${error.message}
                    </div>
                `;
                
                currentTest++;
                updateProgress();
            }
        }

        // اختبار الاستجابة
        function testResponsive() {
            const testElement = document.getElementById('responsiveTest');
            const statusBadge = document.getElementById('responsiveStatusBadge');
            const details = document.getElementById('responsiveDetails');
            
            statusBadge.textContent = 'جاري الاختبار...';
            statusBadge.className = 'test-status status-pending';
            
            try {
                const tests = [];
                
                // اختبار عرض الشاشة
                const screenWidth = window.innerWidth;
                const screenHeight = window.innerHeight;
                
                tests.push(`✅ عرض الشاشة: ${screenWidth}px`);
                tests.push(`✅ ارتفاع الشاشة: ${screenHeight}px`);
                
                // اختبار دعم اللمس
                if ('ontouchstart' in window) {
                    tests.push('✅ دعم اللمس متاح');
                } else {
                    tests.push('⚠️ دعم اللمس غير متاح');
                }
                
                // اختبار دعم CSS Grid
                if (CSS.supports('display', 'grid')) {
                    tests.push('✅ CSS Grid مدعوم');
                } else {
                    tests.push('❌ CSS Grid غير مدعوم');
                }
                
                // اختبار دعم Flexbox
                if (CSS.supports('display', 'flex')) {
                    tests.push('✅ Flexbox مدعوم');
                } else {
                    tests.push('❌ Flexbox غير مدعوم');
                }
                
                // اختبار دعم CSS Variables
                if (CSS.supports('color', 'var(--test)')) {
                    tests.push('✅ CSS Variables مدعومة');
                } else {
                    tests.push('❌ CSS Variables غير مدعومة');
                }
                
                const passedTests = tests.filter(test => test.includes('✅')).length;
                const totalResponsiveTests = tests.length;
                
                if (passedTests >= totalResponsiveTests * 0.8) {
                    testResults.responsive = true;
                    statusBadge.textContent = 'نجح';
                    statusBadge.className = 'test-status status-success';
                } else {
                    testResults.responsive = false;
                    statusBadge.textContent = 'فشل جزئي';
                    statusBadge.className = 'test-status status-error';
                }
                
                details.innerHTML = `
                    <div class="test-result ${testResults.responsive ? 'result-success' : 'result-error'}">
                        ${tests.join('<br>')}
                        <br><br>
                        <strong>النتيجة: ${passedTests}/${totalResponsiveTests} اختبارات نجحت</strong>
                    </div>
                `;
                
                currentTest++;
                updateProgress();
                
            } catch (error) {
                testResults.responsive = false;
                statusBadge.textContent = 'فشل';
                statusBadge.className = 'test-status status-error';
                
                details.innerHTML = `
                    <div class="test-result result-error">
                        ❌ فشل اختبار الاستجابة<br>
                        خطأ: ${error.message}
                    </div>
                `;
                
                currentTest++;
                updateProgress();
            }
        }

        // اختبار الأداء
        function testPerformance() {
            const testElement = document.getElementById('performanceTest');
            const statusBadge = document.getElementById('performanceStatusBadge');
            const details = document.getElementById('performanceDetails');
            
            statusBadge.textContent = 'جاري الاختبار...';
            statusBadge.className = 'test-status status-pending';
            
            try {
                const tests = [];
                
                // اختبار وقت التحميل
                const loadTime = performance.now();
                tests.push(`✅ وقت التحميل: ${Math.round(loadTime)}ms`);
                
                // اختبار عدد العناصر
                const elements = document.querySelectorAll('*').length;
                tests.push(`✅ عدد العناصر: ${elements}`);
                
                // اختبار عدد الصور
                const images = document.querySelectorAll('img').length;
                tests.push(`✅ عدد الصور: ${images}`);
                
                // اختبار عدد الروابط
                const links = document.querySelectorAll('a').length;
                tests.push(`✅ عدد الروابط: ${links}`);
                
                // اختبار عدد الأزرار
                const buttons = document.querySelectorAll('button').length;
                tests.push(`✅ عدد الأزرار: ${buttons}`);
                
                // اختبار الذاكرة
                if (performance.memory) {
                    const memory = performance.memory;
                    const usedMB = Math.round(memory.usedJSHeapSize / 1024 / 1024);
                    tests.push(`✅ الذاكرة المستخدمة: ${usedMB}MB`);
                } else {
                    tests.push('⚠️ معلومات الذاكرة غير متاحة');
                }
                
                const passedTests = tests.filter(test => test.includes('✅')).length;
                const totalPerformanceTests = tests.length;
                
                if (passedTests >= totalPerformanceTests * 0.8) {
                    testResults.performance = true;
                    statusBadge.textContent = 'نجح';
                    statusBadge.className = 'test-status status-success';
                } else {
                    testResults.performance = false;
                    statusBadge.textContent = 'فشل جزئي';
                    statusBadge.className = 'test-status status-error';
                }
                
                details.innerHTML = `
                    <div class="test-result ${testResults.performance ? 'result-success' : 'result-error'}">
                        ${tests.join('<br>')}
                        <br><br>
                        <strong>النتيجة: ${passedTests}/${totalPerformanceTests} اختبارات نجحت</strong>
                    </div>
                `;
                
                currentTest++;
                updateProgress();
                
                // عرض الملخص
                showSummary();
                
            } catch (error) {
                testResults.performance = false;
                statusBadge.textContent = 'فشل';
                statusBadge.className = 'test-status status-error';
                
                details.innerHTML = `
                    <div class="test-result result-error">
                        ❌ فشل اختبار الأداء<br>
                        خطأ: ${error.message}
                    </div>
                `;
                
                currentTest++;
                updateProgress();
                showSummary();
            }
        }

        // عرض iframe
        function showIframe(iframeId) {
            const iframe = document.getElementById(iframeId);
            if (iframe.style.display === 'none') {
                iframe.style.display = 'block';
            } else {
                iframe.style.display = 'none';
            }
        }

        // عرض الملخص
        function showSummary() {
            const totalTests = Object.keys(testResults).length;
            const passedTests = Object.values(testResults).filter(result => result === true).length;
            const failedTests = totalTests - passedTests;
            const successRate = Math.round((passedTests / totalTests) * 100);
            
            document.getElementById('totalTests').textContent = totalTests;
            document.getElementById('passedTests').textContent = passedTests;
            document.getElementById('failedTests').textContent = failedTests;
            document.getElementById('successRate').textContent = successRate + '%';
            
            document.getElementById('summarySection').style.display = 'block';
        }
    </script>
</body>
</html>
