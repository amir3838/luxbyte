# ุฏููู ุฅุนุฏุงุฏ Firebase Cloud Messaging (FCM) - ูููุณ ุจุงูุช

## ูุธุฑุฉ ุนุงูุฉ
ุชู ุฅุถุงูุฉ ูุธุงู ุงูุฅุดุนุงุฑุงุช ุงูููุฑูุฉ (Web Push) ุฅูู ูุดุฑูุน ูููุณ ุจุงูุช ุจุงุณุชุฎุฏุงู Firebase Cloud Messaging. ูุฐุง ุงููุธุงู ูุณูุญ ุจุฅุฑุณุงู ุฅุดุนุงุฑุงุช ููุฑูุฉ ูููุณุชุฎุฏููู ุงููุณุฌููู.

## ุงููููุงุช ุงููุถุงูุฉ/ุงููุนุฏูุฉ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช
- `supabase/migrations/003_create_push_tokens_table.sql` - ุฌุฏูู ุชุฎุฒูู ุชูููุงุช ุงูุฅุดุนุงุฑุงุช

### 2. ูููุงุช Firebase
- `js/firebase-config.js` - ุฅุนุฏุงุฏุงุช Firebase
- `firebase-messaging-sw.js` - Service Worker ููุฅุดุนุงุฑุงุช
- `js/push-notifications.js` - ูุฏูุฑ ุงูุฅุดุนุงุฑุงุช

### 3. API Endpoints
- `api/push/register.js` - ุชุณุฌูู ุชููู FCM
- `api/push/send.js` - ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช

### 4. ูุงุฌูุฉ ุงููุณุชุฎุฏู
- `dashboard.html` - ุฅุถุงูุฉ ูุณู ุงูุฅุดุนุงุฑุงุช
- `config.js` - ุฅุถุงูุฉ ุฅุนุฏุงุฏุงุช Firebase

## ุฎุทูุงุช ุงูุฅุนุฏุงุฏ

### 1. ุฅุนุฏุงุฏ Firebase Console

#### ุฃ) ุฅูุดุงุก ูุดุฑูุน Firebase
1. ุงุฐูุจ ุฅูู [Firebase Console](https://console.firebase.google.com/)
2. ุฃูุดุฆ ูุดุฑูุน ุฌุฏูุฏ ุฃู ุงุณุชุฎุฏู ุงููุดุฑูุน ุงูููุฌูุฏ
3. ุงุณู ุงููุดุฑูุน: `studio-1f95z` (ุฃู ุฃู ุงุณู ุชุฑูุฏู)

#### ุจ) ุฅุถุงูุฉ ุชุทุจูู ููุจ
1. ูู ููุญุฉ Firebaseุ ุงุถุบุท ุนูู "Add app" โ "Web"
2. ุณุฌู ุงุณู ุงูุชุทุจูู: `luxbyte-web`
3. ุงูุณุฎ ุฅุนุฏุงุฏุงุช Firebase (ุชู ุฅุถุงูุชูุง ูุณุจูุงู ูู `config.js`)

#### ุฌ) ุชูุนูู Cloud Messaging
1. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงุฐูุจ ุฅูู "Messaging"
2. ุงุถุบุท ุนูู "Get started"
3. ุงุฐูุจ ุฅูู "Cloud Messaging" โ "Web configuration"
4. ุงูุณุฎ "Web push certificates" โ "Key pair" (VAPID Key)

#### ุฏ) ุฅูุดุงุก Service Account
1. ุงุฐูุจ ุฅูู "Project Settings" โ "Service accounts"
2. ุงุถุบุท ุนูู "Generate new private key"
3. ุงุญูุธ ููู JSON
4. ุญูู ุงูููู ุฅูู Base64:
   ```bash
   base64 -i path/to/service-account.json
   ```

### 2. ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช

#### ุฃ) ุชุญุฏูุซ VAPID Key
ูู ููู `config.js`ุ ุงุณุชุจุฏู:
```javascript
FCM_VAPID_KEY: "YOUR_VAPID_KEY_HERE"
```
ุจู VAPID Key ูู Firebase Console

#### ุจ) ุฅุถุงูุฉ ูุชุบูุฑุงุช ุงูุจูุฆุฉ ูู Vercel
1. ุงุฐูุจ ุฅูู Vercel Dashboard โ ูุดุฑูุนู โ Settings โ Environment Variables
2. ุฃุถู ุงููุชุบูุฑุงุช ุงูุชุงููุฉ:
   ```
   FIREBASE_ADMIN_SA_BASE64 = [Base64 encoded service account JSON]
   ```

### 3. ุชุดุบูู Migration
```bash
# ูู Supabase CLI
supabase db push
```

### 4. ุชุซุจูุช Dependencies
```bash
npm install
```

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุชูุนูู ุงูุฅุดุนุงุฑุงุช ูููุณุชุฎุฏููู
- ุงููุณุชุฎุฏููู ูุฏุฎููู ุฅูู ููุญุฉ ุงูุชุญูู
- ูุถุบุทูู ุนูู "ุชูุนูู ุงูุฅุดุนุงุฑุงุช"
- ูุชู ุญูุธ ุงูุชููู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 2. ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช
```javascript
// ุฅุฑุณุงู ุฅุดุนุงุฑ ูุฌููุน ุฃุฌูุฒุฉ ุงููุณุชุฎุฏู
const response = await fetch('/api/push/send', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    userId: 'user-uuid',
    title: 'ุนููุงู ุงูุฅุดุนุงุฑ',
    body: 'ูุญุชูู ุงูุฅุดุนุงุฑ',
    url: 'https://example.com'
  })
});
```

### 3. ุฅุฑุณุงู ุฅุดุนุงุฑ ุชุฌุฑูุจู
- ูู ููุญุฉ ุงูุชุญููุ ุงุถุบุท ุนูู "ุฅุฑุณุงู ุฅุดุนุงุฑ ุชุฌุฑูุจู"
- ุณูุชู ุฅุฑุณุงู ุฅุดุนุงุฑ ููุฑู ูููุณุชุฎุฏู ุงูุญุงูู

## ุงูููุฒุงุช

### โ ูุฏุนูู
- ุฅุดุนุงุฑุงุช Web Push
- ุญูุธ ุงูุชูููุงุช ูู Supabase
- ูุงุฌูุฉ ุชูุนูู/ุฅูุบุงุก ุงูุฅุดุนุงุฑุงุช
- ุฅุดุนุงุฑุงุช ุชุฌุฑูุจูุฉ
- ุฏุนู ูุชุตูุญุงุช ุญุฏูุซุฉ

### โ๏ธ ูููุฏ
- ูุชุทูุจ HTTPS ูู ุงูุฅูุชุงุฌ
- ูุง ูุนูู ูู Safari (iOS) ุฅูุง ูุน PWA
- ูุชุทูุจ ุฅุฐู ุงููุณุชุฎุฏู

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### 1. ุงูุฅุดุนุงุฑุงุช ูุง ุชุนูู
- ุชุฃูุฏ ูู ุฃู ุงููููุน ูุนูู ุนูู HTTPS
- ุชุญูู ูู VAPID Key
- ุชุฃูุฏ ูู ุชุณุฌูู Service Worker

### 2. ุฎุทุฃ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุชุฃูุฏ ูู ุชุดุบูู Migration
- ุชุญูู ูู ุฅุนุฏุงุฏุงุช Supabase RLS

### 3. ุฎุทุฃ ูู API
- ุชุฃูุฏ ูู ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ ูู Vercel
- ุชุญูู ูู Firebase Service Account

## ุงูุฃูุงู

- ุฌููุน ุงูุชูููุงุช ูุญููุฉ ุจู Row Level Security
- ุงููุณุชุฎุฏููู ูููููู ุฑุคูุฉ/ุชุนุฏูู ุชูููุงุชูู ููุท
- ุงููุฏูุฑูู ูููููู ุฑุคูุฉ ุฌููุน ุงูุชูููุงุช
- ูุง ูุชู ุชุฎุฒูู ูุนูููุงุช ุญุณุงุณุฉ ูู ุงูุชููู

## ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุงุณุชูุณุงุฑุงุช:
- ๐ง ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: support@luxbyte.com
- ๐ ุงููุงุชู: 01148709609
- ๐ ุงููููุน: https://luxbyte.com

---

**ููุงุญุธุฉ**: ูุฐุง ุงููุธุงู ุฅุถุงูู ููุง ูุคุซุฑ ุนูู ุงููุธุงุฆู ุงูููุฌูุฏุฉ. ูููู ุฅุฒุงูุชู ุจุณูููุฉ ุฅุฐุง ูุฒู ุงูุฃูุฑ.
