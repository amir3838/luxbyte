<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - LUXBYTE</title>
    <meta name="description" content="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£Ùˆ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯ ÙÙŠ LUXBYTE">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="assets/app_icon/LUXBYTE.png" type="image/png">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <img src="assets/app_icon/LUXBYTE.png" alt="LUXBYTE Logo" style="height: 40px; width: auto; margin-right: 8px;">
                <span>LUXBYTE</span>
            </div>
            <nav class="nav">
                <a href="index.html">
                    <i class="fas fa-home"></i>
                    Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                </a>
                <a href="social.html">
                    <i class="fas fa-share-alt"></i>
                    Ø§Ù„ØªÙˆØ§ØµÙ„
                </a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <div style="max-width: 500px; margin: 64px auto;">
            <!-- Login Form -->
            <div class="card" id="login-form">
                <div class="card-header" style="justify-content: center;">
                    <div class="card-icon">
                        <i class="fas fa-sign-in-alt"></i>
                    </div>
                    <div>
                        <h2 class="card-title">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
                        <p style="color: #666;">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ LUXBYTE</p>
                    </div>
                </div>

                <form id="loginForm">
                    <div class="form-group">
                        <label class="form-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                        <input type="email" class="form-control" id="login-email" name="email" data-i18n-ph="auth.email" placeholder="example@email.com" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                        <input type="password" class="form-control" id="login-password" name="password" data-i18n-ph="auth.password_ph" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="remember-me">
                            <span>ØªØ°ÙƒØ±Ù†ÙŠ</span>
                        </label>
                    </div>

                    <button type="submit" class="btn" style="width: 100%; margin-bottom: 16px;" data-i18n="auth.sign_in">
                        <i class="fas fa-sign-in-alt"></i>
                        ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                    </button>
                </form>

                <div style="text-align: center; margin-top: 24px; padding-top: 24px; border-top: 1px solid #e5e7eb;">
                    <p style="color: #666; margin-bottom: 16px;">Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ</p>
                    <button class="btn btn-outline" onclick="goToAccountSelection()" style="width: 100%;" data-i18n="auth.create_account">
                        <i class="fas fa-user-plus"></i>
                        Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
                    </button>
                </div>
            </div>

            <!-- Signup Form -->
            <div class="card hidden" id="signup-form">
                <div class="card-header" style="justify-content: center;">
                    <div class="card-icon">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <div>
                        <h2 class="card-title">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h2>
                        <p style="color: #666;">Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ LUXBYTE Ø§Ù„ÙŠÙˆÙ…</p>
                    </div>
                </div>

                <form id="signupForm">
                    <div class="form-group">
                        <label class="form-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                        <input type="email" class="form-control" id="signup-email" name="email" data-i18n-ph="auth.email" placeholder="example@email.com" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                            <input type="password" class="form-control" id="signup-password" name="password" data-i18n-ph="auth.password_ph" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                            <input type="password" class="form-control" id="signup-confirm-password" name="confirmPassword" data-i18n-ph="auth.confirm_password_ph" placeholder="Ø£ÙƒØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="terms-acceptance" required>
                            <span>Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ <a href="terms-conditions.html" target="_blank" rel="noopener" style="color: #6b7cff;">Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…</a></span>
                        </label>
                    </div>

                    <button type="submit" class="btn" style="width: 100%; margin-bottom: 16px;" data-i18n="auth.create_account">
                        <i class="fas fa-user-plus"></i>
                        Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨
                    </button>
                </form>

                <div style="text-align: center; margin-top: 24px; padding-top: 24px; border-top: 1px solid #e5e7eb;">
                    <p style="color: #666; margin-bottom: 16px;">Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ</p>
                    <button class="btn btn-outline" onclick="showLoginForm()" style="width: 100%;" data-i18n="auth.signin">
                        <i class="fas fa-sign-in-alt"></i>
                        ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
    <script src="i18n-dict.js"></script>
    <script src="js/translation-utils.js"></script>
    <script src="common.js"></script>
    <script>
        // Form switching
        function showLoginForm() {
            document.getElementById('login-form').classList.remove('hidden');
            document.getElementById('signup-form').classList.add('hidden');
        }

        function showSignupForm() {
            document.getElementById('login-form').classList.add('hidden');
            document.getElementById('signup-form').classList.remove('hidden');
        }

        // Check if user is already logged in
        document.addEventListener('DOMContentLoaded', async () => {
            const session = await LUXBYTE.getSession();
            if (session) {
                // Check for return URL
                const returnUrl = new URLSearchParams(window.location.search).get('return');
                if (returnUrl) {
                    window.location.href = returnUrl;
                } else {
                    window.location.href = 'choose-platform.html';
                }
            }
        });

        // Login form submission
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const submitBtn = e.target.querySelector('button[type="submit"]');

            if (!email || !password) {
                LUXBYTE.notifyErr('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„');
                return;
            }

            LUXBYTE.showLoading(submitBtn.id, 'Ø¬Ø§Ø±ÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...');

            try {
                const { data, error } = await LUXBYTE.supabase.auth.signInWithPassword({
                    email: email,
                    password: password
                });

                if (error) {
                    throw error;
                }

                LUXBYTE.notifyOk('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­');

                // Check for return URL
                const returnUrl = new URLSearchParams(window.location.search).get('return');
                if (returnUrl) {
                    window.location.href = returnUrl;
                } else {
                    window.location.href = 'choose-platform.html';
                }

            } catch (error) {
                console.error('Login error:', error);
                LUXBYTE.notifyErr('Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„: ' + error.message);
            } finally {
                LUXBYTE.hideLoading(submitBtn.id, '<i class="fas fa-sign-in-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„');
            }
        });

        // Signup form submission
        document.getElementById('signupForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const confirmPassword = document.getElementById('signup-confirm-password').value;
            const termsAccepted = document.getElementById('terms-acceptance').checked;
            const submitBtn = e.target.querySelector('button[type="submit"]');

            if (!email || !password || !confirmPassword) {
                LUXBYTE.notifyErr('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„');
                return;
            }

            if (password !== confirmPassword) {
                LUXBYTE.notifyErr('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙˆØªØ£ÙƒÙŠØ¯Ù‡Ø§ ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚ØªÙŠÙ†');
                return;
            }

            if (!termsAccepted) {
                LUXBYTE.notifyErr('ÙŠØ¬Ø¨ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…');
                return;
            }

            LUXBYTE.showLoading(submitBtn.id, 'Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨...');

            try {
                const { data, error } = await LUXBYTE.supabase.auth.signUp({
                    email: email,
                    password: password,
                    options: {
                        emailRedirectTo: window.location.origin + '/choose-platform.html'
                    }
                });

                if (error) {
                    throw error;
                }

                if (data.user && !data.user.email_confirmed_at) {
                    LUXBYTE.notifyOk('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨! ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨');
                } else {
                    LUXBYTE.notifyOk('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­');
                    window.location.href = 'choose-platform.html';
                }

            } catch (error) {
                console.error('Signup error:', error);
                LUXBYTE.notifyErr('Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨: ' + error.message);
            } finally {
                LUXBYTE.hideLoading(submitBtn.id, '<i class="fas fa-user-plus"></i> Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨');
            }
        });

        // Logout functionality (if user is logged in)
        async function logout() {
            try {
                await LUXBYTE.supabase.auth.signOut();
                LUXBYTE.notifyOk('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­');
                window.location.href = 'index.html';
            } catch (error) {
                console.error('Logout error:', error);
                LUXBYTE.notifyErr('Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬');
            }
        }

        // Go to account type selection
        function goToAccountSelection() {
            window.location.href = 'account-type-selection.html';
        }

        // Add logout button if user is logged in
        document.addEventListener('DOMContentLoaded', async () => {
            const session = await LUXBYTE.getSession();
            if (session) {
                const nav = document.querySelector('.nav');
                const logoutBtn = document.createElement('a');
                logoutBtn.href = '#';
                logoutBtn.innerHTML = '<i class="fas fa-sign-out-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬';
                logoutBtn.onclick = (e) => {
                    e.preventDefault();
                    logout();
                };
                nav.appendChild(logoutBtn);
            }

            // Initialize common elements
            injectNavbar('auth');
            applyI18n();
        });
    </script>

    <!-- Ticker Marquee -->
    <div class="ticker" role="status" aria-live="polite">
        <div class="ticker__track">
            ğŸš€ Ø¨Ø« ØªØ¬Ø±ÙŠØ¨ÙŠ Ø­ÙŠ ğŸš€ â€” Ù„Ø§ ØªØªØ±Ø¯Ø¯ ÙÙŠ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ ÙÙŠ Ø­Ø§Ù„ Ø¸Ù‡ÙˆØ± Ø£ÙŠ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ â€” Ù„ÙˆÙƒØ³ Ø¨Ø§ÙŠØª (Ù‡Ù†ÙƒØ¨Ø± Ù…Ø¹ Ø¨Ø¹Ø¶) â€” Ù…Ù†ØµØ© Ø´ÙˆØ¨ Ø¥ÙŠ Ø¬ÙŠ Ùˆ Ù…Ø§Ø³ØªØ± Ø¯Ø±Ø§ÙŠÙØ± â€” Ø§Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© ÙˆØ®Ø¯Ù…Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„ â€” Ø§Ù†Ø¶Ù… Ø¥Ù„ÙŠÙ†Ø§ Ø§Ù„Ø¢Ù† â€” ğŸ“ 01148709609 â€” ğŸŒ www.luxbyte.com
        </div>
    </div>
</body>
</html>
